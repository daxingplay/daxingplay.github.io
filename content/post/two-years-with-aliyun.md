+++
author = "daxingplay"
date = 2013-05-09T16:10:38Z
description = ""
draft = false
slug = "two-years-with-aliyun"
title = "阿里云云服务器两周年的点滴"
aliases = [
    "/two-years-with-aliyun/"
]
+++



# 前言

最近接到阿里云的电话，说我已经是阿里云的老客户了，已经用了阿里云两年的服务了，让我写点东西。两年，我身边发生了很多很多事情，两年，真的好快，却也好漫长。所以，虽然我之前写过阿里云的评测，但既然是个这么重要的日子，又临近淘宝十周年，是该写点东西纪念下。不过，我保证，会用一个客观公正的角度，从我这个“老”用户的角度来给大家介绍一个真实的阿里云。而且，更多的是讲故事。


# 我与阿里云


## 相识

虽然这部分之前写过，但为了文章完整，我还是再写一下吧。

阿里云是2011年5月开始出售云服务器产品的。我很有幸作为第一批用户使用了阿里云的产品。当时正值我要离开校园走入社会，再加上我也想把自己的橘汁仙剑网搬回国内。那段时间，国内到国外线路各种不稳定（当然，即使现在也不稳定），我在阿里云之前也尝试过linode，linode是好的没话说，但是还是线路问题，没法给用户提供稳定的访问速度，试想，当你访问一个不起眼的网站的时候，经常上不去，或者打开很慢的时候，你下次还想来么？而且，当时我对比了一下阿里云和linode的配置。当时阿里云最低款的是现在的标准A套餐（1.5GB内存，150GB硬盘，2M带宽后来提升到5M），1990元/年，linode最接近这个价格的是套餐是最低的配置：512M内存，20GB硬盘，200GB流量（当然linode十周年的时候提升了不少），这性价比，再加上阿里云是阿里巴巴旗下的公司，肯定有保障，不会像小的VPS商轻易跑路，所以，我当时一咬牙，买了一年，现在想想，真是太划算了（毕竟现在涨价到3990元/年了）。当时有些站长很聪明，一下子续费了好几年。


## 相知

我的第一台云服务器是购于2011-5-25日，当时不如现在乐观，可选的操作系统很少，linux只有red hat可选，而且是装的很齐全的带桌面的red hat。我买了之后，先是删除各种不用的组件、桌面环境，然后配置服务器环境。因为我本身对linux还是非常熟悉的，所以配置起来也没花很久，顺利地就把自己的网站迁移过来了。当然，为了保险起见，我没有把域名解析过来，只是自己本地通过绑定host的方式来测试。

然而第二天，很杯具的事情发生了，因为我更新了系统的内核，导致重启后，云服务器肿么都启动不起来。然后后台提交工单，很快就有客服联系了我，因为当时云服务器刚开始销售，客服对这些也不是很了解，最后弄了很久，没办法，只能重置系统。。。然后再配环境。还好我没有把域名解析过来，可见一定要事先测试啊。其实配环境很快，时间主要是花在迁移数据上，毕竟国外往国内传数据，速度不是那么快。

因为之前那次没有找到原因（都没有想到是内核升级的缘故），我以为是我哪里的环境配置错了导致的。然后我继续升级了内核。。。不过这次我没有重启，测试环境没有问题之后，直接把域名解析过来了。刚解析过来之后，网站访问速度一下子提升了一个档次，会员普遍反映网站打开快好多好多。我当时心里真开心啊~


## 相处

然后，就用了很长很长的时间，期间也通过各种方式给阿里云提了好多的建议，也找到了当时为啥启动不起来的真正原因，现在，如果你不小心升级了内核导致启动不起来，工程师可以直接帮你修复。之前提的很多建议，阿里云也一直坚持在改进，比如增加可选系统，比如配置变更等。

但有一点到现在感觉还是个坎儿。就是磁盘IO。

虽然一开始就发现了，刚开始的时候，我开了MySQL的主从复制，从服务器是AWS的机器，也是因为跨国网络传输的原因，但之前一直运作很好，突然有一天，我收到报警，网站打不开，进去服务器一看，load奇高无比，都飙到了100+，然后io wait也奇高无比，但cpu、内存都正常，所以很明显是IO问题，后来经过我仔细排查，发现确实是MySQL写入bin-log卡住，我就暂时关闭了bin-log，因为网站本身访问量不大，所以还OK。

后来磁盘IO问题被大家广泛提及，所以阿里云也推出了RDS等服务，其实就是变相给你一台能基本保证磁盘IO的服务器专门跑数据库而已（当然这个服务器不受你完全控制），不过可喜的是，一直都见到阿里云在努力改进底层架构，毕竟这种问题不是一天两天就能解决的，虽然这个问题至今还让我很头疼，但是我也理解。

最近几天也是，因为一些原因，我又开启了MySQL的bin-log，还特意把bin-log放到了另外一个硬盘上，但是还是经常偶尔出现磁盘性能突然下降的情况，但另外一台云服务器就没有，猜测可能硬盘不是在同一个“区域”的原因。

还好我自己启用了redis，利用内存的高速缓存来缓解MySQL暂用大量磁盘IO的情况。不过如果网站访问量大了，还是一样会出问题。

这个，我想博客园最有发言权了，毕竟他们网站访问量很大，迁移到阿里云的过程中遇到了不少问题，大家可以看看他们总结的经验：http://www.cnblogs.com/cmt/tag/%E9%98%BF%E9%87%8C%E4%BA%91/。说实话，真的很欣赏博客园这种分享的精神，把自己使用云计算的痛写给大家，给后人激励，给阿里云参考。


## 相“爱”

说实话，这个小节的标题似乎不太恰当，但也确实能表达我作为一个老用户此时的心情。本身我自己的网站还不大，所以磁盘IO问题对我来说还是偶尔的痛点，相比较阿里云其它的优点，我还是非常喜欢阿里云的。毕竟人无完人，更何况也看到了阿里云改进的决心和进步。

至于阿里云的优点，其实我前面的博文有非常详细的介绍，这里只是简单地罗列一些主要的优点，更多的优点，等你自己去发现:)

- 稳定：这点毋庸置疑，阿里云SLA肯定在99.9999%以上，毕竟我是从阿里云最开始售卖云服务器就开始用的，给大家截取我当前最老服务器的uptime：![云服务器两年uptime](https://daxingplay.me/wp-content/uploads/2013/05/云服务器两年uptime.png)

中间的重启，都是我自己重启的~  
 * 访问速度快：这点也几乎毋庸置疑，从监控宝和腾讯分析的访问速度统计来看，是非常不错的，我想每个用阿里云的客户都会觉得阿里云的BGP线路确实很赞，毕竟阿里集团下面的网站用的线路不会差:)  
 * 备案迅速：至少我自己是的，基本上每次备案一个新站，一周内基本下号。自己保证资料正确，邮递过去材料，很快的。  
 * 客服给力：客服响应速度太赞了，而且半夜也有资深的工程师值班，能快速解决你的问题。  
 * 配置合理：现在都能自定义配置了，多赞啊~  
 * 性价比高：这个价钱，无论是相对于linode还是aws，性价比都是不错的。  
 * 各种附加服务：SLB（负载均衡）、RDS、OSS、云监控，云盾，都是非常赞的服务  
 * 快照：快照服务基本上是非常非常非常赞的服务，能快速备份和恢复，如果您还没用，赶紧试一试，AWS也有的。


# 阿里云，我想对你说

写到这儿，已经基本上把我想说的都说的差不多了。真的非常荣幸成为阿里云的第一批用户，见证了阿里云一路走来的艰辛和决心。所以，这里也借地儿给阿里云提一些建议吧。

其实我最想提的建议还是磁盘IO的问题，有时候这个真的很让人发疯，又没有合适的解决办法，总不能老是迁移集群或者是加内存加机器吧。我能给的建议有：

- 优化底层架构：虽然这是一个漫长的过程，但是我相信阿里云工程师的实力，AWS能把这块儿做得很好，那你们也可以。
- 提供高磁盘IO的磁盘购买：这些可以通过一些硬件等方式解决，可以提高一些价钱
- 快照能选择恢复到哪个硬盘：比如我可以把一个配置好的系统做成快照，然后恢复到一台新机器上去。或者可以像linode的stack script、aws的自定义镜像等功能那样也可以。
- 硬盘可以删除、扩充大小：删除应该好做，扩充大小，我不是很清楚好不好实现，不过删除功能我想应该是必要的，也不是很清楚为啥现在限制购买3块硬盘。
- SLB希望支持自定义错误页
- 一些细节优化：比如尽量减少出现云服务器id，磁盘的id情况，很多情况下，这些ID都是一些不规则的字串组成的，比如云磁盘id：1007-70011111，看了这个id，我根本不知道是哪块儿硬盘，尤其是账号下服务器很多，磁盘也很多的情况，只能去猜测这个磁盘是哪个，经常弄错快照等情况。这些用户体验的细节都可以优化。


# 总结

很庆幸，阿里云陪我的网站们走过了两年的时光。阿里云，感谢有你。前方的路还很长，请不要停下你前进的脚步。祝阿里云成为国内最优秀的云计算提供商。

 (1668)


